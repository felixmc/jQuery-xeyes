jQuery.fn.xeyes=function(m){m=$.extend({padding:0,radius:'natural',onHover:'follow',position:'center',trigger:window,triggerOut:undefined,triggerOutSpeed:1000},m);var n=parseInt(m.padding,10);this.each(function(c,d){var f=$(d),$eye=f.parent();$(d).css('position','absolute').parent().css('position','relative');var g=f.outerWidth(),irisH=f.outerHeight(),eyeW=$eye.width(),eyeH=$eye.height(),defX=eyeW/2-g/2,defY=eyeH/2-irisH/2;if(m.radius=='circular'&&eyeW>eyeH){eyeW=eyeH}else if(m.radius=='circular'){eyeH=eyeW}$(d).css("left",defX+"px").css("top",defY+"px");var h=f.offset(),offX=h.left+g/2,offY=h.top+irisH/2,position={top:{degree:90},bottom:{degree:-90},left:{degree:180},right:{degree:0},topRight:{degree:45},topLeft:{degree:135},bottomRight:{degree:-45},bottomLeft:{degree:-135}};var i=function(){h=f.offset();offX=h.left+g/2;offY=h.top+irisH/2};if(m.position.x){f.css("left",defX-parseInt(m.position.x,10)+"px").css("top",defY-parseInt(m.position.y,10)+"px")}else if(m.position.degree!==undefined){var j=m.position.degree*Math.PI/-180;f.css("left",defX+Math.cos(j)*(eyeW/2-g/2-n)+"px").css("top",defY+Math.sin(j)*(eyeH/2-irisH/2-n)+"px")}else if(m.position=="center"){f.css("left",defX+"px").css("top",defY+"px")}else{var k=position[m.position].degree*Math.PI/-180;f.css("left",defX+Math.cos(k)*(eyeW/2-g/2-n)+"px").css("top",defY+Math.sin(k)*(eyeH/2-irisH/2-n)+"px")}var l=function(e){f.stop().clearQueue();i();var a=Math.atan((e.pageY-offY)/(e.pageX-offX)),direction=(offX>=e.pageX)?-1:1,newX=Math.cos(a)*(eyeW/2-g/2-n)*direction,newY=Math.sin(a)*(eyeH/2-irisH/2-n)*direction,radius=Math.sqrt(Math.pow(newX,2)+Math.pow(newY,2)),distance=Math.sqrt(Math.pow(e.pageY-offY,2)+Math.pow(e.pageX-offX,2));if(radius>distance&&m.onHover.toLowerCase()!='nofollow'){f.css("left",(e.pageX-offX+defX)+"px").css("top",(e.pageY-offY+defY)+"px")}else{f.css("left",defX+newX+"px").css("top",defY+newY+"px")}},eyesReset=function(e){if(m.triggerOut!=undefined){if(m.triggerOut.x){f.animate({left:defX-parseInt(m.triggerOut.x,10)+"px",top:defY-parseInt(m.triggerOut.y,10)+"px"},m.triggerOutSpeed)}else if(m.triggerOut.degree!==undefined){var a=m.triggerOut.degree*Math.PI/-180;f.animate({left:defX+Math.cos(a)*(eyeW/2-g/2-n)+"px",top:defY+Math.sin(a)*(eyeH/2-irisH/2-n)+"px"},m.triggerOutSpeed)}else if(m.triggerOut=="center"){f.animate({left:defX+"px",top:defY+"px"},m.triggerOutSpeed)}else{var b=position[m.triggerOut].degree*Math.PI/-180;f.animate({left:defX+Math.cos(b)*(eyeW/2-g/2-n)+"px",top:defY+Math.sin(b)*(eyeH/2-irisH/2-n)+"px"},m.triggerOutSpeed)}}};$(m.trigger).mousemove(l).mouseleave(eyesReset);$(window).resize(i)})};